{% extends 'core/base.html' %}

{% block title %}{{ title }} - CRM OF{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
        <li class="breadcrumb-item"><a href="{% url 'client_list' %}">Clients</a></li>
        {% if enfant %}
            <li class="breadcrumb-item"><a href="{% url 'client_detail' enfant.client.pk %}">{{ enfant.client.nom }} {{ enfant.client.prenom }}</a></li>
            <li class="breadcrumb-item active">Modifier {{ enfant.nom }}</li>
        {% else %}
            <li class="breadcrumb-item active">Nouvel enfant</li>
        {% endif %}
    </ol>
</nav>

<h1 class="page-title">
    <i class="fas fa-child"></i> {{ title }}
</h1>

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <i class="fas fa-edit me-2"></i> {{ title }}
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.client.id_for_label }}" class="form-label fw-bold">Client *</label>
                                {{ form.client }}
                                {% if form.client.errors %}
                                    <div class="text-danger small">{{ form.client.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.nom.id_for_label }}" class="form-label fw-bold">Nom de l'enfant *</label>
                                {{ form.nom }}
                                {% if form.nom.errors %}
                                    <div class="text-danger small">{{ form.nom.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="{{ form.date_naissance.id_for_label }}" class="form-label fw-bold">Date de naissance *</label>
                        {{ form.date_naissance }}
                        {% if form.date_naissance.errors %}
                            <div class="text-danger small">{{ form.date_naissance.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <h5 class="mt-4 mb-3">Garde et garderie</h5>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="mb-3">
                                <div class="form-check">
                                    {{ form.garde_partagee }}
                                    <label class="form-check-label fw-bold" for="{{ form.garde_partagee.id_for_label }}">
                                        Garde partagée
                                    </label>
                                </div>
                                {% if form.garde_partagee.errors %}
                                    <div class="text-danger small">{{ form.garde_partagee.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <div class="form-check">
                                    {{ form.garderie_subventionnee }}
                                    <label class="form-check-label fw-bold" for="{{ form.garderie_subventionnee.id_for_label }}">
                                        Garderie subventionnée
                                    </label>
                                </div>
                                {% if form.garderie_subventionnee.errors %}
                                    <div class="text-danger small">{{ form.garderie_subventionnee.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <div class="form-check">
                                    {{ form.garderie_non_subventionnee }}
                                    <label class="form-check-label fw-bold" for="{{ form.garderie_non_subventionnee.id_for_label }}">
                                        Garderie non subventionnée
                                    </label>
                                </div>
                                {% if form.garderie_non_subventionnee.errors %}
                                    <div class="text-danger small">{{ form.garderie_non_subventionnee.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <h5 class="mt-4 mb-3">Période et coûts</h5>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="{{ form.date_debut.id_for_label }}" class="form-label fw-bold">Date début *</label>
                                {{ form.date_debut }}
                                {% if form.date_debut.errors %}
                                    <div class="text-danger small">{{ form.date_debut.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="{{ form.date_fin.id_for_label }}" class="form-label fw-bold">Date fin *</label>
                                {{ form.date_fin }}
                                {% if form.date_fin.errors %}
                                    <div class="text-danger small">{{ form.date_fin.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="{{ form.cout_par_jour.id_for_label }}" class="form-label fw-bold">Coût par jour ($) *</label>
                                {{ form.cout_par_jour }}
                                {% if form.cout_par_jour.errors %}
                                    <div class="text-danger small">{{ form.cout_par_jour.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between">
                        <a href="{% if enfant %}{% url 'client_detail' enfant.client.pk %}{% else %}{% url 'client_list' %}{% endif %}" 
                           class="btn btn-secondary">
                            <i class="fas fa-times me-2"></i> Annuler
                        </a>
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save me-2"></i> Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}