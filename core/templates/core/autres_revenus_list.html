{% extends 'core/base.html' %}
{% block title %}Autres revenus - CRM OF{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="page-title mb-0"><i class="fas fa-hand-holding-usd"></i> Autres revenus</h1>
    <a href="{% url 'autres_revenus_create' %}" class="btn btn-primary"><i class="fas fa-plus me-2"></i> Nouveau</a>
</div>
<div class="card mb-4">
    <div class="card-body">
        <form method="GET" class="row g-3">
            <div class="col-md-10"><input type="text" class="form-control" name="search" value="{{ search }}" placeholder="Rechercher..."></div>
            <div class="col-md-2"><button type="submit" class="btn btn-outline-primary w-100"><i class="fas fa-search me-2"></i> Rechercher</button></div>
        </form>
    </div>
</div>
<div class="card">
    <div class="card-body">
        {% if revenus %}
            <table class="table table-hover">
                <thead class="table-dark"><tr><th>Client</th><th>Type</th><th>Période</th><th>Montant</th><th>Actions</th></tr></thead>
                <tbody>
                    {% for revenu in revenus %}
                    <tr>
                        <td><a href="{% url 'client_detail' revenu.client.pk %}">{{ revenu.client.nom }} {{ revenu.client.prenom }}</a></td>
                        <td>{{ revenu.get_type_display }}</td>
                        <td>{{ revenu.date_debut|date:"d/m/Y" }} - {{ revenu.date_fin|date:"d/m/Y" }}</td>
                        <td><span class="badge bg-success">{{ revenu.montant|floatformat:2 }} $</span></td>
                        <td><a href="{% url 'client_detail' revenu.client.pk %}" class="btn btn-sm btn-outline-primary"><i class="fas fa-eye"></i></a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="text-muted text-center">Aucun autre revenu trouvé.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
